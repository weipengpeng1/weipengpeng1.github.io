(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-success-success"],{1854:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uIcon:n("d249").default,uButton:n("9f9d").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[t.show?n("div",{staticClass:"app-loading"},[n("div",{staticClass:"app-loading__logo"}),n("div",[n("span",{staticClass:"dot dot-spin"},[n("i"),n("i"),n("i"),n("i")])]),n("div",{staticClass:"app-loading__title"},[t._v("正在加载数据，请耐心等待")])]):n("div",{staticClass:"animate__animated  animate__backInDown center",staticStyle:{"text-align":"center"}},[n("u-icon",{attrs:{color:"#72c240",size:"128",name:"checkmark-circle"}}),n("v-uni-text",{staticStyle:{color:"#515151","font-size":"18px"}},[t._v("身份核验成功")])],1),n("div",[n("u-button",{attrs:{shape:"circle",ripple:!0,"ripple-bg-color":"#f2f2f2"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleout.apply(void 0,arguments)}}},[t._v("退出识别")])],1)])},i=[]},"1ec7":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.dot[data-v-380869cb]{-webkit-animation:antRotate-data-v-380869cb 1.2s infinite linear;animation:antRotate-data-v-380869cb 1.2s infinite linear;-webkit-transform:rotate(45deg);transform:rotate(45deg);position:relative;display:inline-block;font-size:32px;width:32px;height:32px;box-sizing:border-box}.dot i[data-v-380869cb]{width:14px;height:14px;position:absolute;display:block;background-color:#de8b53;border-radius:100%;-webkit-transform:scale(.75);transform:scale(.75);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:.3;-webkit-animation:antSpinMove-data-v-380869cb 1s infinite linear alternate;animation:antSpinMove-data-v-380869cb 1s infinite linear alternate}.dot i[data-v-380869cb]:nth-child(1){top:0;left:0}.dot i[data-v-380869cb]:nth-child(2){top:0;right:0;-webkit-animation-delay:.4s;animation-delay:.4s}.dot i[data-v-380869cb]:nth-child(3){right:0;bottom:0;-webkit-animation-delay:.8s;animation-delay:.8s}.dot i[data-v-380869cb]:nth-child(4){bottom:0;left:0;-webkit-animation-delay:1.2s;animation-delay:1.2s}@keyframes antRotate-data-v-380869cb{to{-webkit-transform:rotate(405deg);transform:rotate(405deg)}}@-webkit-keyframes antRotate-data-v-380869cb{to{-webkit-transform:rotate(405deg);transform:rotate(405deg)}}@keyframes antSpinMove-data-v-380869cb{to{opacity:1}}@-webkit-keyframes antSpinMove-data-v-380869cb{to{opacity:1}}.app-loading[data-v-380869cb]{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;flex-direction:column\n  /* background: #fff; */}.app-loading__logo[data-v-380869cb]{margin-bottom:30px}.app-loading__logo img[data-v-380869cb]{width:90px;vertical-align:bottom}.app-loading__title[data-v-380869cb]{font-size:14px;color:#515151;margin-top:30px}@-webkit-keyframes loader-data-v-380869cb{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loader-data-v-380869cb{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.center[data-v-380869cb]{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;margin-top:150px;align-items:center;flex-direction:column}',""]),t.exports=e},"8e80":function(t,e,n){"use strict";var a=n("bc87"),o=n.n(a);o.a},9596:function(t,e,n){"use strict";n.r(e);var a=n("ed70"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"962b":function(t,e,n){"use strict";n.r(e);var a=n("1854"),o=n("9596");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("8e80");var r=n("828b"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"380869cb",null,!1,a["a"],void 0);e["default"]=s.exports},bc87:function(t,e,n){var a=n("1ec7");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("967d").default;o("568c6cdc",a,!0,{sourceMap:!1,shadowMode:!1})},ed70:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7a76"),n("c9b5"),n("bf0f"),n("d4b5");var o=a(n("2634")),i=a(n("5de6")),r=a(n("fcf3")),s=a(n("2fdc")),c={data:function(){return{pageOptions:null,retryCount:0,maxRetries:3}},onLoad:function(t){try{console.log("收到的原始参数:",t);var e={uid:t.uid||"",token:t.token||"",type:t.type||2,satoken:t.satoken||""};this.retryCount=0,this.pageOptions=e,this.succ(e)}catch(n){console.error("参数处理错误:",n),uni.showToast({title:"参数错误",icon:"none",duration:2e3})}},onShow:function(){console.log("循环进入页面"),uni.showToast({title:"循环进入页面",icon:"none",duration:1500}),this.retryCount=0,this.succ(this.pageOptions)},methods:{succ:function(t){var e=this;return(0,s.default)((0,o.default)().mark((function n(){var a,s,c,u,d;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(uni.showToast({title:"循环调用了succ这个方法",icon:"none",duration:3e3}),n.prev=1,t&&"object"===(0,r.default)(t)){n.next=4;break}throw new Error("参数格式错误");case 4:return console.log("请求参数:",t,"当前重试次数:",e.retryCount),n.next=7,uni.request({url:"https://api-driver.sph56.cn/api/auth/faceOcr/user/faceSuccess",method:"POST",header:{"content-type":"application/json",satoken:t.satoken||"47a0eedc-0bfb-40d4-b2a8-53be86be227a"},data:{uid:t.uid||"1874029560005812225",token:t.token||"nertaKt7Jgo509OiwIxoDV0Y",type:t.type||2}});case 7:if(a=n.sent,s=(0,i.default)(a,2),c=s[0],u=s[1],!c){n.next=13;break}throw new Error("网络请求失败");case 13:if(d=u.data,0,200!==d.code){n.next=22;break}return e.show=!e.show,1,n.next=20,e.handleSuccess(1);case 20:n.next=24;break;case 22:e.retryCount++,e.retryCount<e.maxRetries?(uni.showToast({title:"认证失败，第".concat(e.retryCount,"次重试"),icon:"none",duration:1500}),setTimeout((function(){e.succ(t)}),1500)):(uni.showToast({title:"认证失败次数过多",icon:"none",duration:2e3}),setTimeout((function(){uni.navigateTo({url:"/pages/failed/failed"})}),2e3));case 24:n.next=31;break;case 26:n.prev=26,n.t0=n["catch"](1),console.error("认证失败:",n.t0),e.retryCount++,e.retryCount<e.maxRetries?(uni.showToast({title:"认证失败，第".concat(e.retryCount,"次重试"),icon:"none",duration:1500}),setTimeout((function(){e.succ(t)}),1500)):(uni.showToast({title:"认证失败次数过多",icon:"none",duration:2e3}),setTimeout((function(){uni.navigateTo({url:"/pages/failed/failed"})}),2e3));case 31:case"end":return n.stop()}}),n,null,[[1,26]])})))()},handleSuccess:function(t){return(0,s.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showToast({title:"认证成功，给小程序传递的数据：".concat(t),icon:"none",duration:5e3}),e.next=3,new Promise((function(e){setTimeout((0,s.default)((0,o.default)().mark((function n(){var a;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,webUni.postMessage({data:{handlerIdent:t}}),uni.reLaunch({url:"/pages/my/my",success:function(){console.log("成功--"),uni.showToast({title:"返回小程序成功",icon:"none",duration:7e3})},fail:function(t){console.log("返回小程序失败-",t),uni.showToast({title:"返回小程序失败",icon:"none",duration:7e3})}}),n.next=5,window.flutter_inappwebview.callHandler("handlerIdent",t);case 5:a=n.sent,console.log("Flutter回调结果:小程序--",JSON.stringify(a)),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("消息处理失败:",n.t0);case 12:e();case 13:case"end":return n.stop()}}),n,null,[[0,9]])}))),1500)}));case 3:case"end":return e.stop()}}),e)})))()}},handleout:function(){try{webUni.postMessage({data:{handlerIdent:1}}),webUni.navigateBack({delta:5}),window.flutter_inappwebview.callHandler("handlerIdent",0).then((function(t){console.log(JSON.stringify(t))}))}catch(t){console.log(t)}}};e.default=c}}]);